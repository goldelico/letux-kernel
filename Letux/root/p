# simple "play" auf PandaES
# vorher sollte einmal ./twl gelaufen sein damit die Mixer eingestellt sind

CARD=$(./findsoundcard PandaBoardES)
DEV=11
LOG=/dev/null
[ "$1" == "-s" ] && { STRACE=strace ; shift ; }
[ "$1" ] && DEV="$1"	# 2 is doing something

amixer cset -c $CARD 1 name='Headset Left Playback' 1
amixer cset -c $CARD 1 name='Headset Right Playback' 1
amixer cset -c $CARD 1 name='Headset Playback Volume' 12
amixer cset -c $CARD 1 name='DL1 PDM Switch' 1
amixer cset -c $CARD 1 name='Sidetone Mixer Playback' 1
amixer cset -c $CARD 1 name='SDT DL Volume' 120
amixer cset -c $CARD 1 name='DL1 Mixer Multimedia' 1
amixer cset -c $CARD 1 name='DL1 Media Playback Volume' 110
amixer sset -c $CARD 'Analog Left',0 'Aux/FM Left'
amixer sset -c $CARD 'Analog Right',0 'Aux/FM Right'
amixer sset -c $CARD 'Aux FM',0 7
amixer sset -c $CARD 'AUDUL Media',0 149
amixer sset -c $CARD 'Capture',0 4
amixer sset -c $CARD 'MUX_UL00,0' AMic0
amixer sset -c $CARD 'MUX_UL01,0' AMic1
amixer sset -c $CARD 'AMIC UL',0 120

if [ "$STRACE" ]
then
	AUDIODEV=hw:$CARD,$DEV strace play -v 0.98 testmp3.mp3 remix 1 2 1 2 2>$DEV.out
else
	AUDIODEV=hw:$CARD,$DEV play -v 0.98 testmp3.mp3 remix 1 2 1 2
fi
